<html>

<head>
    <meta charset="UTF-8">
    <title>Register</title>
    <meta name="description" content="Login - Register Template">
    <meta name="author" content="Lorenzo Angelino aka MrLolok">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">


    <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous">
    </script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
  integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
  
  
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="../css/elements.css" rel="stylesheet">
    
    <link rel="stylesheet" href="register.css">
	  <link rel="stylesheet" type="text/css" href="../css/navbar/navbar.css">

    <link rel="stylesheet" href="../css/register-login.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body {
            background-color: #303641;
        }
    </style>
    <script>
      if(localStorage.getItem("authtoken")) {
      var myHeaders = new Headers();
      myHeaders.append(
        "Authorization",
        "Token " + localStorage.getItem("authtoken")
		  );

      var formdata = new FormData();

      var requestOptions = {
        method: "POST",
        headers: myHeaders,
        body: formdata,
        redirect: "follow",
      };

      fetch(
        "https://avishkarapi.sahajbamba.me/auth/getuserdetails/",
        requestOptions
      )
        .then((response) => response.text())
        .then((result) => {
          var userDetails = JSON.parse(result);
          if (!userDetails["success"]) throw result;
          window.location = "../index.html";
        })
        .catch((error) => {
          console.log(error);
        });
    }
    </script>
</head>

<body>

    <nav class="navbar navbar-expand-md navbar-dark">
		<!--class navbar-expand-md-->
		<div class="container-fluid">
		  <a class="navbar-brand pt-0 pb-0" href="../index.html">
			<img class="navbar-items-logo" src="../img/Neon_triangle.png" height="80" alt="">
		  </a>
	
		  <button class="navbar-toggler ml-auto pt-0 pb-0" type="button" data-toggle="collapse"
			data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
			aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		  </button>
	
		  <div class="collapse navbar-collapse pt-0 pb-0" id="navbarSupportedContent">
			  <ul class="navbar-nav ml-auto style">
				<li class="nav-item">
				  <a class="nav-link font-weight-bold" href="../events/" style="margin-left:12px">EVENTS</a>
				</li>
				<li class="nav-item">
				  <a class="nav-link font-weight-bold" href="../schedule/" style="margin-left:12px;">SCHEDULE</a>
				</li>
				<li class="nav-item">
				  <a class="nav-link font-weight-bold" href="../sponsors/" style="margin-left:12px;">SPONSORS</a>
				</li>
				<li class="nav-item">
				  <a class="nav-link font-weight-bold" href="../team/" style="margin-left:12px;">TEAM</a>
				</li>
				<li class="nav-item">
				  <a class="nav-link font-weight-bold" href="../faq/"
					style="margin-left:12px;margin-right:12px;">FAQ</a>
				</li>
			  </ul>
			
			<!--login div container-->
			<div id="login">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item dropdown">
						<a class="nav-link" href="#" id="navbarDropdown" role="button" onclick="showPendingRequests()"
							data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="margin-right:12px">
							<img class="navbar-items-logo" src="../img/notification.svg"><span class="badge badge-warning" id="notificationCount"></span></a>
						</a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown" id="pendingRequests" style="display: none;">
						</div>
					</li>
					<li class="nav-item dropdown">
						<a class="nav-link" href="#" id="navbarDropdown" role="button"
							data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<img class="navbar-items-logo" src="../img/person.svg">
						</a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
							<a class="dropdown-item" href="../profile/index.html">Profile</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="../create team/createteam.html">Create Team</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="#" onclick="logout()">Logout</a>
						</div>
					</li>
				</ul>
			</div>
	
			<div id="notlogin" style="display: none;">
			  <ul class="navbar-nav ml-auto style">
				<li class="nav-item">
				  <a class="nav-link font-weight-bold" href="../register/login.html">Login/Register</a>
				</li>
			  </ul>
			</div>
		  </div>
		</div>
	  </nav>
	
	
	<!-- Modal -->
	<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
		  <div class="modal-content">
			<div class="modal-header">
			  <h5 class="modal-title" id="exampleModalLabel" style="color:black">Confirmation</h5>
			  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			  </button>
			</div>
			<div class="modal-body">
				<div>
			  		<h5 style="color:black"><small>Do you want to accept or reject the request?</small></h5>
				</div>
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn btn-success" onclick="acceptRequest()">Accept</button>
			  <button type="button" class="btn btn-primary" onclick="rejectRequest()">Reject</button>
			</div>
		  </div>
		</div>
	  </div>


    <div class="container mb-5">
      <div class="rows d-flex justify-content-between">
        <div class="col-sm-4 d-flex align-items-center" style="background: none;">
          <img src="../img/imageedit_1_6984842575.png" class="img-thumbnail" alt="Failed to Load Image" style="background: none;border: 0px;">
        </div>
        <div class="col-sm-4">
          <div id="container-register" style="top:6%">
            <div id="title">
                <i class="material-icons lock"> lock </i> Register
            </div>
    
            <form id="register-form">
                <div class="input">
                    <div class="input-addon">
                        <i class="material-icons">email</i>
                    </div>
                    <input id="email" placeholder="Email" type="email" required class="validate" autocomplete="off">
                </div>
    
                <div class="clearfix"></div>
    
                <div class="input">
                    <div class="input-addon">
                        <i class="material-icons">face</i>
                    </div>
                    <input id="username" placeholder="Username" type="text" required class="validate" autocomplete="off" pattern="[a-z][a-z0-9$_]{1,14}" title="Username length should be between 2 to 15. It should start with small english alphabets(a-z), followed by characters : small english alphabets(a-z), numbers(0-9), special symbols($ (Dollar) and _ (Underscore))">
                </div>
    
                <div class="clearfix"></div>
    
                <div class="input">
                    <div class="input-addon">
                        <i class="material-icons">vpn_key</i>
                    </div>
                    <input id="password" placeholder="Password" type="password" required class="validate" autocomplete="off"pattern=".{7,}" title="Minimum password length should be 7 characters long">
                    <span class="register-eye" onclick="myFunction()">
                        <i id="hide1" class="fa fa-eye"></i>
                        <i id="hide2" class="fa fa-eye-slash"></i>
                    </span>
                </div>
    
                <div class="remember-me">
                    <input type="checkbox">
                    <span style="color: #DDD">Are you from MNNIT</span>
                </div>
    
                <input type="submit" value="Register" />
            </form>
    
            <div class="privacy">
                <!-- <a href="#">Privacy Policy</a> -->
            </div>
    
            <div class="register">
                Do you already have an account?
                <a href="login.html"><button id="register-link">Log In here</button></a>
            </div>
        </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous">
    </script>

    <script>
        function myFunction() {
            var x = document.getElementById('password');
            var y = document.getElementById('hide1');
            var z = document.getElementById('hide2');

            if(x.type === 'password') {
                x.type = 'text';
                y.style.display = 'block';
                z.style.display = 'none';
            } else {
                x.type = 'password';
                y.style.display = 'none';
                z.style.display = 'block';
            }
        }
        const myForm = document.getElementById('register-form');
        myForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            let formdata = new FormData();
            let Email = document.getElementById("register-form").elements[0].value;
            let userName = document.getElementById("register-form").elements[1].value;
            let password = document.getElementById("register-form").elements[2].value;
            let is_mnnit = document.getElementById("register-form").elements[3];

            if(is_mnnit.checked === true) {
                is_mnnit = "true";
            } else {
                is_mnnit = "false";
            }
            
            formdata.append("username", userName);
            formdata.append("email", Email);
            formdata.append("password", password);
            formdata.append("ismnnit", is_mnnit);

            var requestOptions = {
            method: 'POST',
            body: formdata,
            redirect: 'follow'
            };

            // await fetch("https://avishkarapi.sahajbamba.me/auth/register/", requestOptions)
            // .then((response) => {
            //     return response.text();
            // })
            // .then((result) => {
            //     let res = JSON.parse(result);
            //     console.log(res);
            //     if(res.success) {
            //         window.location = "./login.html";
            //         // bs4pop.alert("Registered successful", function (e) {
            //         //     window.location = "../events/";
            //         // });
            //     } else {
            //         // bs4pop.alert(res.errors + "", function (e) {
            //         //     console.log(res.errors);
            //         // });
            //         console.log(res.errors);
            //         toastr.error(res.errors,'Error!', {
            //           closeButton: true
            //         });
            //     }
            // })
            // .catch((error) => {
            //           // bs4pop.alert("" + error, function (e) {
            //           //         console.log('error : ', error);
            //           //     });
            //           console.log(error);
            //         toastr.error('Failed to register','Error!', {
            //           closeButton: true
            //         });
            // });
        });
    </script>
    <script src="../js/navbar/main.js"></script>
    <div class="footer">
		<p class="footer_text" style="margin-bottom: 0">All Rights Reserved &copy; MNNIT Allahabad, 2020</p>
	</div>
</body>

</html>
